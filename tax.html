<!DOCTYPE html>
<html>
 <head>
    <title>
        Carson Mallen Tax Table Computation
    </title>
 </head>

 <body>
    <h2>Carson Mallen Tax Table Computation</h2>

    <form>
        <label for="income"> Enter income: </label>
        <input type="number" id="income" value="5000"><br><br>

        <label for="baseRate">Enter the base tax rate: </label>
        <input type="number" id="baseRate" value="0.05" step="any"><br><br>

        <label for="cutoff">Enter the cut off: </label>
        <input type="number" id="cutoff" value="7500"><br><br>

        <label for="extRate">Enter the extended rate: </label>
        <input type="number" id="extRate" value="0.15" step="any"><br><br>

        <button type="button" onclick="doTax()">Show tax table</button>
    </form>

    <br> 

    <h3>Choose Operation</h3>
    <form>
        <input type="radio" name="operation" value="exponent" onclick="chooseOp()">
        <label>power</label><br>

        <input type="radio" name="operation" value="add" onclick="chooseOp()">
        <label>sum</label><br>

        <input type="radio" name="operation" value="mod" onclick="chooseOp()">
        <label>mod</label><br>
    </form>

    <br>

    <div id="results"></div>
    <div id="opResults"></div>
    <script>
        function doTax(){
            let income = Number(document.getElementById("income").value);
            let cutoff = Number(document.getElementById("cutoff").value);
            let baseRate = Number(document.getElementById("baseRate").value);
            let extRate = Number(document.getElementById("extRate").value);
            let taxTable = "";

            for (let i = 1; i<= 5; i++){

                let incomeLevel = income * i;
                let tax = 0;

                if (incomeLevel <= cutoff) {
                    tax = incomeLevel * baseRate;
                }
                else {
                    tax = (cutoff * baseRate) +
                        ((incomeLevel -  cutoff) * extRate);
                }

                taxTable += "incomeLevel "  + incomeLevel +
                    " is " + tax + "; ";
            }

            document.getElementById("results").innerHTML = 
                "Taxes are: " + taxTable;
        }

        function chooseOp(){
            let income = Number(document.getElementById("income").value);
            let baseRate = Number(document.getElementById("baseRate").value);
            let radios = document.getElementsByName("operation");
            let result = 0;
            let outputText = "";

            for (let i = 0; i < radios.length; i++) {

                if (radios[i].checked){

                    if (radios[i].value === "exponent"){
                        result = income ** baseRate;
                        outputText = income + " ^ " + baseRate + " is " + result;
                    }

                    else if (radios[i].value === "add") {
                        result = income + baseRate;
                        outputText = income + " + " + baseRate + " is " + result;
                    }

                    else if (radios[i].value === "mod") {
                        result = income % baseRate;
                        outputText = income + " % " + baseRate + " is " + result;
                    }
                }
            }

            document.getElementById("opResults").innerHTML = outputText;
        }
    </script>
 </body>
</html> 